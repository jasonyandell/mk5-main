{"id":"mk5-tailwind-0mt","content_hash":"ff6caf861b34c52d821d1a525d2a376a1747f0c9dee5ada7e17abc17fef361ce","title":"Investigate one-hand-complete phase missing from UI mappings - signals incomplete feature integration","description":"CRITICAL: Do NOT update mappings without investigation. One-hand feature was recently added (ADR-20251112) but integration is incomplete.\n\nSvelte check errors in Header.svelte (lines 62-63):\n- phaseNames and phaseColors missing 'one-hand-complete' entry\n- GAME_PHASES constant doesn't include 'one-hand-complete'\n- GamePhase type DOES include it (added for one-hand mode)\n\nThis is a TYPE SAFETY VIOLATION - runtime could crash if state has 'one-hand-complete' phase.\n\nINVESTIGATION NEEDED:\n1. Was one-hand-complete phase fully integrated into all systems?\n2. What other UI components might be missing this phase?\n3. Should 'one-hand-complete' be in GAME_PHASES constant or is it special?\n4. What happens when game reaches this phase - does UI break?\n5. Are there other incomplete integrations from the one-hand feature?\n\nRelated: oneHandRuleSet was added to registry, tests updated to expect 7 rulesets. But UI wasn't updated.\n\nDo NOT just add mappings - understand WHY they're missing and what else might be incomplete.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-16T16:21:24.591273169-06:00","updated_at":"2025-11-16T18:57:50.786096908-06:00","closed_at":"2025-11-16T18:57:50.786096908-06:00","source_repo":"."}
{"id":"mk5-tailwind-1v4","content_hash":"06ce4b60402ce73d598a79c08777a733c854b382ffe02984b903e5e6cf3305a6","title":"Update handOutcome.ts helper function","description":"Update src/game/core/handOutcome.ts: Change checkStandardHandOutcome to return discriminated union. Replace { isDetermined: false } with { determined: false }. Depends on mk5-tailwind-2gg.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:54:40.404610333-06:00","updated_at":"2025-11-16T17:13:10.721028479-06:00","closed_at":"2025-11-16T17:13:10.721028479-06:00","source_repo":"."}
{"id":"mk5-tailwind-230","content_hash":"692762d999d5b7b6321eab7130f0ce8f0ee8c4a80140a7bc7a234b2285fa051f","title":"Run full test suite and verify HandOutcome refactor","description":"Run npm test, verify all 36+ checkHandOutcome test failures resolved, zero TypeScript errors, all tests passing. Depends on all previous tasks.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:55:22.122964227-06:00","updated_at":"2025-11-16T17:13:10.725027683-06:00","closed_at":"2025-11-16T17:13:10.725027683-06:00","source_repo":"."}
{"id":"mk5-tailwind-2gg","content_hash":"da52a4bc5dc313afecab27f48835a1b26011634cce9bdfa99151ac8346704b32","title":"Update HandOutcome type definition to discriminated union","description":"Change src/game/rulesets/types.ts: Replace HandOutcome interface with discriminated union. Update GameRules.checkHandOutcome return type from 'HandOutcome | null' to 'HandOutcome'. BLOCKS ALL OTHER TASKS.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:54:32.307129366-06:00","updated_at":"2025-11-16T17:13:10.720108786-06:00","closed_at":"2025-11-16T17:13:10.720108786-06:00","source_repo":"."}
{"id":"mk5-tailwind-349","content_hash":"145c4cc9bac8fd218102681559b93941a956d4eb2837d5e9095f1bbf000c0871","title":"Investigate 14 integration test failures","description":"14 integration tests failing across base-full-hand.test.ts (5), early-termination-general.test.ts (8), nello-full-hand.test.ts (2), sevens-full-hand.test.ts (2). These appear unrelated to HandOutcome discriminated union refactor. Need investigation to determine root cause. Tests involve: full hand playthrough, early termination, phase transitions, winner determination.","status":"open","priority":0,"issue_type":"task","created_at":"2025-11-16T17:16:47.921333308-06:00","updated_at":"2025-11-16T17:16:47.921333308-06:00","source_repo":"."}
{"id":"mk5-tailwind-61x","content_hash":"7c413bdb13757610eb9c55041cf170abfa2521812f09bcdfcf464be32f43093d","title":"Update executeCompleteTrick executor","description":"Update src/game/core/actions.ts: Change from 'if (outcome \u0026\u0026 outcome.isDetermined)' to 'if (outcome.determined)'. Leverage TypeScript type narrowing. Depends on mk5-tailwind-2gg.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:55:00.839201257-06:00","updated_at":"2025-11-16T17:13:10.723237851-06:00","closed_at":"2025-11-16T17:13:10.723237851-06:00","source_repo":"."}
{"id":"mk5-tailwind-6ir","content_hash":"39ff130df9a2ffb1b57541c06f258d0cf3af4e176f9923b44ace45b202fd7e45","title":"Investigate E2E redeal test failure - autoExecute behavior vs test expectations","description":"E2E test 'should progress through bidding round and allow redeal' failing at line 272:\nTest expects to see redeal action in available actions, but finds nothing.\n\nbasic-gameplay-new.spec.ts:272:\nexpect(actions.some(action =\u003e action.type === 'redeal')).toBe(true)\nExpected: true, Received: false\n\nINVESTIGATION NEEDED - DO NOT change test expectations without approval:\n1. Is redeal supposed to be visible to the user or auto-executed?\n2. Did autoExecute behavior change recently?\n3. Was this test passing before? What changed?\n4. Is the test expectation correct for the intended UX?\n\nInitial analysis suggests redeal has autoExecute: true flag and is processed by kernel before reaching UI. But WHY is the test expecting manual execution?\n\nThis could indicate:\n- Test was written with wrong expectations\n- autoExecute behavior changed\n- Kernel processing changed\n- Something broke in the action generation or auto-execution flow\n\nNeed to understand INTENDED behavior before fixing.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-16T16:22:14.635460775-06:00","updated_at":"2025-11-16T16:22:27.686298117-06:00","source_repo":"."}
{"id":"mk5-tailwind-6pt","content_hash":"87d6f8382dc706cc576b93dfcd65d3b27e6dc20bae50b5a96d7e53262a9ae8e5","title":"Update special rulesets (nello/plunge/splash/sevens)","description":"Update 4 rulesets + helpers.ts: Change checkMustWinAllTricks to return HandOutcome (not | null). Update all checkHandOutcome overrides to use discriminated union. Depends on mk5-tailwind-2gg, mk5-tailwind-1v4.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:54:54.720514106-06:00","updated_at":"2025-11-16T17:13:10.722571245-06:00","closed_at":"2025-11-16T17:13:10.722571245-06:00","source_repo":"."}
{"id":"mk5-tailwind-73a","content_hash":"d4abdcb7faed3e46ce514081f2978df9fb4978631ef4e529d3e1a1012aa5b412","title":"Refactor HandOutcome to discriminated union","description":"Replace HandOutcome | null pattern with discriminated union { determined: true/false }. Eliminates nulls, makes invalid states unrepresentable, aligns with FP principles and Result\u003cT\u003e pattern already in codebase.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-16T16:54:23.964793992-06:00","updated_at":"2025-11-16T17:13:24.814979351-06:00","closed_at":"2025-11-16T17:13:24.814979351-06:00","source_repo":"."}
{"id":"mk5-tailwind-akl","content_hash":"686e76761326763b9af721de83b620ab75aeff8735d4f00cb24a3ef040b7f03a","title":"Investigate registry test failures - oneHand ruleset integration vs test expectations","description":"Registry tests expect 6 rulesets but find 7. Tests failing:\n- registry.test.ts:65 - expect(keys).toHaveLength(6)\n- registry.test.ts:233 - expect(originalKeys.length).toBe(6)\n\nThe 7th ruleset is 'oneHand' (recently added per ADR-20251112).\n\nINVESTIGATION NEEDED - DO NOT just update test expectations:\n1. Was oneHand supposed to be in the registry?\n2. Is it properly documented and integrated?\n3. Are tests missing coverage for oneHand behavior?\n4. Should oneHand be treated differently than other rulesets?\n5. What's the relationship between oneHandRuleSet and oneHandActionTransformer?\n\nThe feature may be legitimate, but tests need PROPER coverage, not just count updates.\n\nRelated to mk5-tailwind-0mt - one-hand integration appears incomplete across multiple systems.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-16T16:21:57.1652809-06:00","updated_at":"2025-11-16T16:22:07.585540479-06:00","source_repo":"."}
{"id":"mk5-tailwind-b11","content_hash":"8b71dd0d7659cb8ae199b6eec7d1b0542ffcfcdc0b9a70205485f932aea94364","title":"Update documentation for HandOutcome pattern","description":"Update 3 docs: ARCHITECTURE_PRINCIPLES (change 'Base returns null'), CONCEPTS (update signature), ORIENTATION (add discriminated union example). Depends on mk5-tailwind-2gg through mk5-tailwind-61x.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T16:55:14.976965245-06:00","updated_at":"2025-11-16T17:13:10.724402906-06:00","closed_at":"2025-11-16T17:13:10.724402906-06:00","source_repo":"."}
{"id":"mk5-tailwind-gv0","content_hash":"4839e4278f87b6e0b87dc1ee6de62f5454437f2cd0df9f17f5784c04b3a01460","title":"Update all unit and integration tests","description":"Update 10 test files: Change expect(outcome).toBeNull() to expect(outcome.determined).toBe(false). Change all isDetermined to determined. Depends on mk5-tailwind-2gg through mk5-tailwind-61x.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:55:07.092033392-06:00","updated_at":"2025-11-16T17:13:10.723774622-06:00","closed_at":"2025-11-16T17:13:10.723774622-06:00","source_repo":"."}
{"id":"mk5-tailwind-h7h","content_hash":"95a0b0a11e4e547bdfa3d93adc4b41c38c365747de20559283a93f989c845b3c","title":"Investigate ESLint queueMicrotask errors - why now and what changed?","description":"ESLint errors in src/server/transports/InProcessTransport.ts (lines 54, 78):\n'queueMicrotask' is not defined (no-undef)\n\nqueueMicrotask is used to break synchronous call chains and prevent stack overflow. It's a valid browser/Node.js API since 2018.\n\nINVESTIGATION NEEDED:\n1. Did this file work before? When did it start failing ESLint?\n2. Was queueMicrotask recently added to this file?\n3. Did ESLint config change recently?\n4. Are there OTHER globals missing from eslint.config.js?\n\nThe fix is simple (add queueMicrotask to globals), but WHY is this failing NOW?\n\nRelated: Code comments mention consensus actions causing exponential broadcast loops. Is this related to recent core engine changes?","status":"open","priority":1,"issue_type":"bug","created_at":"2025-11-16T16:21:42.290904984-06:00","updated_at":"2025-11-16T16:21:52.219408531-06:00","source_repo":"."}
{"id":"mk5-tailwind-iz2","content_hash":"1c4edc9c66122512efd29ca723937a6644023a8e33100b11f853b3f301e0f26e","title":"Investigate checkHandOutcome API contract violation - 36 unit test failures after core engine changes","description":"CRITICAL: Do NOT change test expectations without approval. Core engine was recently modified and tests are now failing with:\n\nExpected: null\nReceived: { isDetermined: false }\n\nThis appears in 36 test failures across 13 files. The checkHandOutcome function contract (in GameRules interface, docs, ADRs) clearly states it should return null when hand continues, HandOutcome when hand ends.\n\nImplementation in src/game/core/handOutcome.ts returns { isDetermined: false } in 3 places where it should return null (lines 51-54, 64-67, 168).\n\nINVESTIGATION NEEDED:\n1. What core engine change caused this?\n2. Is the implementation wrong or did the contract intentionally change?\n3. Why are tests failing NOW - what broke?\n4. What's the correct fix - implementation or contract?\n\nAffected files: compose-rules.test.ts, ruleset-overrides.test.ts, backward-compatibility.test.ts, nello-ruleset.test.ts, and 9 others.\n\nDo NOT fix until root cause is understood.","notes":"Fixed via discriminated union refactor (mk5-tailwind-73a). All 36 checkHandOutcome contract violations resolved.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-16T16:21:07.936010531-06:00","updated_at":"2025-11-16T17:13:32.459300397-06:00","closed_at":"2025-11-16T17:13:32.459304104-06:00","source_repo":"."}
{"id":"mk5-tailwind-t3g","content_hash":"a500fdf1a5b2e9ecfd69a5f40c88501fd08df8268940c720fef9ef7815e1f340","title":"Investigate sevens early termination bug - partner wins should not end hand","description":"Sevens ruleset incorrectly returns determined=true when partner wins a trick. Expected: partner winning should allow play to continue (only opponents winning should trigger early termination). Affected test: 'user scenario: partner wins with 7, not set' in sevens-ruleset.test.ts:628. Pre-existing bug, not caused by discriminated union refactor.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-16T17:16:39.455577857-06:00","updated_at":"2025-11-16T19:23:28.701385029-06:00","closed_at":"2025-11-16T19:23:28.701385029-06:00","source_repo":"."}
{"id":"mk5-tailwind-w8l","content_hash":"a42406d94bf552040a8a50b881e87a683c53fb2f762bd662cdaa9efc5a0aada9","title":"Update registry tests to expect 7 rulesets (not 6)","description":"Registry tests expect 6 rulesets but oneHand ruleset was added. Update tests in src/tests/rulesets/composition/registry.test.ts to expect 7 rulesets. Quick fix: change assertions from 6 to 7.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T17:16:30.037969607-06:00","updated_at":"2025-11-16T17:19:12.891552656-06:00","closed_at":"2025-11-16T17:19:12.891552656-06:00","source_repo":"."}
{"id":"mk5-tailwind-xoe","content_hash":"68a89bc306454f63032956e773ef6d8386ea1667d10fd8d73655598faac73029","title":"Update base ruleset and composition layer","description":"Update src/game/rulesets/base.ts and compose.ts: Change composition base identity from null to { determined: false }. Update base ruleset checkHandOutcome. Depends on mk5-tailwind-2gg.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-16T16:54:47.193807582-06:00","updated_at":"2025-11-16T17:13:10.721945927-06:00","closed_at":"2025-11-16T17:13:10.721945927-06:00","source_repo":"."}
{"id":"mk5-tailwind-ycr","content_hash":"31a8100fafbb82d63a085e075b8928c28e3ed6f3b857edc03b882a1c5de0af48","title":"Remove vestigial pre-ruleset logic from core","description":"splash/plunge cases in handOutcome.ts and mathematicalVerification.ts should be handled by rulesets, not core. Core should know nothing about special contracts. This is vestigial from before the ruleset architecture existed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T19:20:55.172278654-06:00","updated_at":"2025-11-16T20:52:01.956743131-06:00","closed_at":"2025-11-16T20:52:01.956743131-06:00","source_repo":"."}
